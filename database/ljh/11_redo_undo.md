# 21.01.24



## 주요 질문



#### 💡 [Redo 란 무엇인가요?](#Redo)

```markdown
Undo는 "원상태로 되돌리다"라는 의미이다.
따라서 Undo 작업은 복구, 롤백을 의미한다.
트래잭션을 이전 상태로 되돌리는 것을 의미
작업 롤백, 읽기 일관성, 복구
사용자가 했던 작업을 반대로 진행함
```

#### 💡 [Uedo 란 무엇인가요?](#Uedo)

```markdown
이전 상태로 되돌아간 후, 실패가 발생하기 전까지의 과정을 그대로 따라가는 것을 의미합니다.
redo를 하기 위해서는 정상적으로 실행 되기까지의 과정을 기록해야 하는데, 이를 log라고 합니다.
복구의 역할, 오라클 서버에 무슨 작을 하든지 모두 redo에 기록이 됩니다.(undo포함)
사용자가 했던 작업을 그대로 다시 함
```

<br />

## ⭐ 개념 정리

### Undo

```markdown
Undo는 "원상태로 되돌리다"라는 의미이다.
따라서 Undo 작업은 복구, 롤백을 의미한다.
트래잭션을 이전 상태로 되돌리는 것을 의미
작업 롤백, 읽기 일관성, 복구
사용자가 했던 작업을 반대로 진행함
```

<br />

### Redo

```markdown
Redo는 "다시 하다"라는 의미이다.
즉, 트랜잭션을 재수행해서 복수하는 것을 의미한다.
이전 상태로 되돌아간 후, 실패가 발생하기 전까지의 과정을 그대로 따라가는 것을 의미합니다.
redo를 하기 위해서는 정상적으로 실행 되기까지의 과정을 기록해야 하는데, 이를 log라고 합니다.
복구의 역할, 오라클 서버에 무슨 작을 하든지 모두 redo에 기록이 됩니다.(undo포함)
사용자가 했던 작업을 그대로 다시 함
```

<br />

### Check Point

```markdown
check point로 설정한 지점 이전 까지는 트랜잭션이 성공적으로 수행이 돼서 disk에 확실히 저장된 상태를 의미합니다.
check point를 설정하는 이유는 시스템을 회복하기 위해 되돌아갈 때, 너무 많이 되돌아가지 않도록 하기 위함입니다.
만약 실패가 발생하여 회복을 할 때 check point가 설정되어 있다면, redo는 check point 시점부터 log를 따라가면서 트랜잭션을 수행하지만, undo는 log를 따라가지 않고 트랜잭션을 재수행 합니다.
```



<br />

### 차이점

<img width="530" alt="스크린샷 2022-01-24 오후 4 31 42" src="https://user-images.githubusercontent.com/60912550/150740117-a5e25802-8fe3-4ced-ac77-49294bb9a443.png">

* T1
  * check point 이전에 실행이 완료되었으므로 failure되더라도 이미 disk에 저장이 된 상태이므로 회복을 하지 않습니다.
* T2
  * check point 이전에 실행된 내용은 disk에 반영이 되었으므로 check point 이후의 내용을 log를 따라가는 redo를 수행합니다.
* T3
  * failure 시점에 실행중이었으므로 check point시점으로 undo한 후, 트랜잭션을 재실행합니다.
* T4
  * check point 이후에 실행되었고 failure시점 전에 실행이 끝났으므로 redo를 수행합니다.
* T5
  * check point 이후에 실행되었고 failure시점에 실행중이었으로 시작지점까지 undo한 후 드랜잭션을 재실행합니다.

<br />

### 요약

* check point 이후에 log기록을 보면서 완료되지 않은 트랜잭션에 대해서 수행
* redo : commit 된 것을 다시 실행
* undo : 트랜잭션은 시작 됬지만 commit되지 않은 것을 연산 취소